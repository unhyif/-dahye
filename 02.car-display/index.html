<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자동차 360도 회전</title>
  <link rel="stylesheet" href="./css/ui-style.css">
</head>
<body>
  <div class="contents">
    <div class="tab">
      <!-- preview -->
      <div class="tab__cont" style="background-image:url('./images/3D_L.jpg')">
        <span class="blind">이미지 미리보기</span>
      </div>
      <!-- //preview -->

      <!-- buttons -->
      <div class="tab__list">
        <div class="tab__item">
          <button type="button" class="tab__button is-active" data-image="3D_L">
            <img src="./images/icon01.png" alt="">
          </button>
        </div>
        <div class="tab__item">
          <button type="button" class="tab__button" data-image="ABP_L">
            <img src="./images/icon02.png" alt="">
          </button>
        </div>
        <div class="tab__item">
          <button type="button" class="tab__button" data-image="C3S_L">
            <img src="./images/icon03.png" alt="">
          </button>
        </div>
        <div class="tab__item">
          <button type="button" class="tab__button" data-image="SWP_L">
            <img src="./images/icon04.png" alt="">
          </button>
        </div>
      </div>
      <!-- //buttons -->
    </div>
  </div>
  <script>    
    // Drag Event [S]
    const dragSection = document.querySelector('.tab__cont');
    let currentDrag;
    let currentImgPosition;
    let currentImgPositionX;
    let currentImgPositionY;
    
    dragSection.addEventListener("mousedown", function(event){
      currentDrag = event.clientX;
      let currentImgPositionX = getComputedStyle(dragSection).backgroundPositionX;
      let currentImgPositionY = getComputedStyle(dragSection).backgroundPositionY;

      console.log(currentImgPositionX , currentImgPositionY);
    });

    dragSection.addEventListener("mousemove", function(event){
        if(event.buttons == 1) {
          event.preventDefault();
          let dragMove = event.clientX;
          let lastMove = dragMove - currentDrag;

          if(lastMove > 0){
            // console.log(lastMove);
            console.log('양수 : 오른쪽 방향 ' + -(Math.ceil(lastMove/960)*960 + currentDrag));
            dragSection.style.backgroundPositionX = -(Math.ceil(lastMove/960)*960 + currentDrag) + 'px';
          }
          // else{
          //   console.log('음수 : 왼쪽 방향 ' + Math.round(lastMove/960)*960);
          //   dragSection.style.backgroundPositionX = Math.round(lastMove/960)*960 + currentDrag + 'px';
          // }
        }
      });
    // Drag Event [E]

    // Tab Event [S]
    const tabButtons = document.querySelectorAll('[data-image]');
    const tabContents = document.querySelector('.tab__cont');

    tabButtons.forEach(function(button){
      button.addEventListener('click', function(){
        const activeButton = document.querySelector('.is-active');
        let dataImage = this.getAttribute('data-image');

        // 이 전에 활성화된 버튼이 있는 경우, is-active 클래스 제거
        if(activeButton){
          activeButton.classList.remove('is-active');
          this.classList.add('is-active');
        }

        // 버튼에 맞는 data-image 속성을 가져와서, image 경로로 대치
        tabContents.style.backgroundImage= "url('./images/" + dataImage + ".jpg')";
      });
    });
     // Tab Event [E]
  </script>
</body>
</html>